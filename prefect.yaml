# Prefect Deployment Configuration
name: perfect
prefect-version: 3.4.1

# Pull step - tells Prefect how to retrieve the flow code from GitHub
# Step 1: Clone the repository
# Step 2: Install Python dependencies from requirements.txt
pull:
- prefect.deployments.steps.git_clone:
    id: clone-step
    repository: https://github.com/galacoder/perfect.git
    branch: main
- prefect.deployments.steps.pip_install_requirements:
    directory: "{{ clone-step.directory }}"
    requirements_file: requirements.txt

# Build, push, and pull are optional
build: null
push: null

# Deployments configuration
deployments:
- name: christmas-signup-handler
  entrypoint: campaigns/christmas_campaign/flows/signup_handler.py:signup_handler_flow
  work_pool:
    name: default
  schedule: null
  parameters: {}
  tags:
  - christmas
  - christmas-2025
  - email-nurture
  description: Christmas Campaign signup handler - creates email sequence for new signups
  version: 1.0.0

- name: christmas-send-email
  entrypoint: campaigns/christmas_campaign/flows/send_email_flow.py:send_email_flow
  work_pool:
    name: default
  schedule: null
  parameters: {}
  tags:
  - christmas
  - christmas-2025
  - email-nurture
  description: Christmas Campaign individual email sender - sends single email in 7-email sequence
  version: 1.0.0

- name: christmas-noshow-recovery-handler
  entrypoint: campaigns/christmas_campaign/flows/noshow_recovery_handler.py:noshow_recovery_handler_flow
  work_pool:
    name: default
  schedule: null
  parameters: {}
  tags:
  - christmas
  - christmas-2025
  - noshow-recovery
  description: Christmas Campaign no-show recovery handler - triggers 3-email recovery sequence
  version: 1.0.0

- name: christmas-postcall-maybe-handler
  entrypoint: campaigns/christmas_campaign/flows/postcall_maybe_handler.py:postcall_maybe_handler_flow
  work_pool:
    name: default
  schedule: null
  parameters: {}
  tags:
  - christmas
  - christmas-2025
  - postcall-followup
  description: Christmas Campaign post-call maybe handler - triggers 3-email follow-up sequence
  version: 1.0.0

- name: christmas-onboarding-handler
  entrypoint: campaigns/christmas_campaign/flows/onboarding_handler.py:onboarding_handler_flow
  work_pool:
    name: default
  schedule: null
  parameters: {}
  tags:
  - christmas
  - christmas-2025
  - onboarding
  description: Christmas Campaign onboarding handler - triggers 3-email welcome sequence
  version: 1.0.0
